/*==============================================================================
 *$RCSfile: algotst.c,v $
 *
 *   DESC : Table lookup and interpolation
 *
 * AUTHOR : dt
 *
 *  EEMBC : Automotive/Industrial Subcommittee 
 *
 *    CVS : $Revision: 1.3 $
 *          $Date: 2002/04/19 18:31:38 $
 *          $Author: rick $
 *          $Source: d:/cvs/eembc2/automotive/tblook01/algotst.c,v $
 *          
 * NOTE   :
 *
 *------------------------------------------------------------------------------
 *
 * HISTORY :
 *
 * $Log: algotst.c,v $
 * Revision 1.3  2002/04/19 18:31:38  rick
 * Bug #146: global tablecount uninitialized
 *
 *
 *------------------------------------------------------------------------------
 * Copyright (c) 1998-2002 by the EDN Embedded Microprocessor 
 * Benchmark Consortium (EEMBC), Inc. 
 * 
 * All Rights Reserved. This is licensed program product and 
 * is owned by EEMBC. The Licensee understands and agrees that the 
 * Benchmarks licensed by EEMBC hereunder (including methods or concepts 
 * utilized therein) contain certain information that is confidential 
 * and proprietary which the Licensee expressly agrees to retain in the 
 * strictest confidence and to use only in conjunction with the Benchmarks 
 * pursuant to the terms of this Agreement. The Licensee further agrees 
 * to keep the source code and all related documentation confidential and 
 * not to disclose such source code and/or related documentation to any 
 * third party. The Licensee and any READER of this code is subject to 
 * either the EEMBC Member License Agreement and/or the EEMBC Licensee 
 * Agreement. 
 * TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, EEMBC DISCLAIMS ALL 
 * WARRANTIES, EITHER EXPRESS OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, 
 * IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR 
 * PURPOSE, WITH REGARD TO THE BENCHMARKS AND THE ACCOMPANYING 
 * DOCUMENTATION. LICENSEE ACKNOWLEDGES AND AGREES THAT THERE ARE NO 
 * WARRANTIES, GUARANTIES, CONDITIONS, COVENANTS, OR REPRESENTATIONS BY 
 * EEMBC AS TO MARKETABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR OTHER 
 * ATTRIBUTES, WHETHER EXPRESS OR IMPLIED (IN LAW OR IN FACT), ORAL OR 
 * WRITTEN. 
 * 
 * Licensee hereby agrees by accessing this source code that all benchmark 
 * scores related to this code must be certified by ECL prior to publication 
 * in any media, form, distribution, or other means of conveyance of 
 * information subject to the terms of the EEMBC Member License Agreement 
 * and/or EEMBC Licensee Agreement. 
 * 
 * Other Copyright Notice (if any): 
 * 
 * For conditions of distribution and use, see the accompanying README file.
 * ===========================================================================*/

/*******************************************************************************
    Includes                                                                    
*******************************************************************************/

#include "algo.h"

/*  DECLARATIONS  */

const varsize engLoadROM[] = 
{
    0, 20, 30, 40, 50, 60, 70, 80, 90, 100, 110, 120, 130, 140, 
    150, 160, 170, 180, 190, 200, 210, 220, 230, 240, 250, 260, 
    270, 280, 290, 300, 310, 320, 330, 340, 350, 360, 370, 380, 
    390, 400, 410, 420, 430, 440, 450, 460, 470, 480, 490, 500
} ;

const varsize engSpeedROM[] = 
{
    0, 200, 300, 400, 500, 600, 700, 800, 900, 1000, 1100, 1200, 
    1300, 1400, 1500, 1600, 1700, 1800, 1900, 2000, 2100, 2200,
    2300, 2400, 2500, 2600, 2700, 2800, 2900, 3000, 3100, 3200,
    3300, 3400, 3500, 3600, 3700, 3800, 3900, 4000, 4100, 4200,
    4300, 4400, 4500, 4600, 4700, 4800, 4900, 5000
} ;

const varsize angleTableROM[] = 
{
    10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10, 10,
    20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20,
    30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30,
    30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30, 30,
    60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 60, 70, 80, 90, 100, 110, 110, 110, 110, 110, 110, 110, 110, 110, 110, 110, 100, 90, 80, 70, 60, 50, 40, 39, 38, 37, 36, 35, 35, 35, 35, 35, 35, 60,
    45, 50, 50, 55, 55, 56, 56, 56, 56, 56, 56, 50, 50, 50, 50, 50, 50, 50, 60, 70, 80, 90, 100, 100, 100, 100, 100, 100, 100, 100, 100, 100, 103, 90, 80, 72, 66, 60, 52, 44, 38, 32, 28, 27, 35, 35, 35, 35, 35, 60,
    30, 40, 40, 50, 54, 54, 54, 54, 54, 54, 54, 40, 40, 40, 40, 40, 40, 40, 50, 60, 70, 86, 90, 91, 92, 91, 90, 89, 89, 90, 92, 94, 94, 91, 74, 64, 63, 62, 54, 46, 40, 34, 29, 28, 35, 35, 35, 35, 35, 60,
    15, 30, 30, 40, 50, 51, 51, 51, 51, 51, 51, 30, 30, 40, 50, 60, 70, 76, 80, 86, 90, 94, 98, 99, 100, 99, 98, 97, 97, 98, 100, 102, 102, 92, 82, 72, 70, 64, 56, 48, 42, 36, 30, 29, 35, 35, 35, 35, 35, 60,
    10, 20, 20, 30, 40, 50, 50, 50, 50, 50, 50, 56, 62, 68, 74, 80, 84, 88, 92, 96, 100, 104, 108, 109, 110, 109, 108, 107, 107, 108, 110, 112, 112, 102, 92, 82, 72, 67, 59, 51, 47, 43, 41, 39, 37, 37, 37, 37, 37, 60,
    10, 20, 20, 30, 40, 50, 50, 50, 50, 50, 50, 56, 62, 68, 74, 80, 86, 92, 98, 102, 106, 110, 114, 115, 116, 115, 114, 113, 113, 114, 116, 118, 118, 108, 98, 88, 80, 70, 62, 54, 49, 45, 43, 41, 39, 39, 39, 39, 39, 100,
    12, 20, 20, 30, 40, 50, 50, 50, 50, 50, 50, 56, 62, 68, 74, 80, 86, 92, 98, 104, 108, 112, 116, 117, 118, 117, 116, 115, 115, 116, 118, 120, 120, 110, 100, 90, 80, 72, 64, 56, 52, 48, 46, 44, 42, 42, 42, 42, 42, 100,
    15, 20, 20, 30, 40, 50, 50, 50, 50, 50, 50, 56, 62, 68, 74, 80, 86, 92, 98, 104, 108, 112, 116, 117, 118, 117, 116, 115, 115, 116, 118, 120, 120, 110, 100, 90, 78, 75, 67, 59, 54, 49, 47, 45, 43, 43, 43, 43, 43, 100,
    20, 20, 20, 30, 40, 50, 50, 50, 50, 50, 50, 56, 62, 68, 74, 80, 86, 92, 98, 103, 107, 111, 115, 116, 117, 116, 115, 114, 114, 115, 117, 119, 119, 109, 99, 88, 78, 75, 67, 59, 54, 49, 47, 45, 43, 43, 43, 43, 43, 100,
    22, 22, 22, 32, 42, 52, 52, 52, 52, 52, 52, 58, 64, 70, 76, 84, 90, 96, 102, 102, 106, 110, 114, 115, 116, 115, 114, 113, 113, 114, 116, 118, 118, 108, 98, 88, 78, 75, 70, 59, 54, 49, 47, 45, 43, 43, 43, 43, 43, 100,
    24, 24, 24, 34, 44, 54, 54, 54, 54, 54, 54, 60, 66, 72, 78, 84, 90, 96, 102, 104, 108, 112, 116, 117, 118, 117, 116, 115, 115, 116, 118, 120, 120, 110, 100, 86, 86, 78, 75, 67, 59, 54, 49, 47, 44, 44, 44, 44, 44, 100,
    30, 30, 30, 40, 50, 60, 60, 60, 60, 60, 60, 66, 72, 78, 84, 90, 96, 102, 108, 112, 116, 120, 124, 125, 126, 125, 124, 123, 123, 124, 124, 122, 120, 118, 108, 88, 88, 78, 75, 67, 59, 54, 49, 47, 44, 44, 44, 44, 44, 100,
    30, 30, 30, 40, 50, 60, 60, 60, 60, 60, 60, 66, 72, 78, 84, 90, 96, 102, 116, 120, 124, 128, 132, 133, 134, 133, 132, 131, 131, 132, 130, 127, 124, 121, 116, 92, 92, 76, 68, 60, 56, 52, 50, 48, 46, 46, 46, 46, 46, 100,
    30, 30, 30, 40, 50, 60, 60, 60, 60, 60, 60, 66, 72, 78, 84, 90, 96, 104, 118, 122, 126, 130, 134, 135, 136, 135, 134, 133, 133, 133, 131, 128, 107, 106, 104, 92, 92, 76, 68, 60, 56, 52, 50, 48, 46, 46, 46, 46, 46, 100,
    31, 31, 31, 41, 51, 61, 61, 61, 61, 61, 61, 67, 73, 79, 85, 91, 97, 103, 120, 124, 128, 132, 136, 137, 138, 137, 136, 135, 134, 134, 132, 129, 107, 106, 104, 92, 92, 76, 68, 60, 56, 52, 50, 48, 46, 46, 46, 46, 46, 100,
    33, 33, 33, 43, 53, 63, 63, 63, 63, 63, 63, 69, 75, 81, 87, 93, 99, 105, 122, 126, 130, 134, 138, 139, 140, 139, 138, 137, 135, 135, 133, 130, 108, 107, 104, 94, 94, 77, 72, 66, 60, 72, 75, 70, 66, 66, 66, 66, 66, 100,
    35, 35, 35, 45, 55, 65, 65, 65, 65, 65, 65, 71, 77, 83, 88, 96, 100, 107, 124, 128, 132, 136, 140, 141, 142, 141, 140, 139, 136, 136, 134, 131, 108, 107, 105, 94, 94, 77, 76, 72, 70, 92, 100, 105, 86, 86, 86, 86, 86, 100,
    35, 35, 35, 45, 55, 65, 65, 65, 65, 65, 65, 67, 69, 71, 77, 83, 89, 95, 126, 130, 134, 138, 142, 143, 144, 143, 142, 141, 137, 137, 135, 132, 109, 108, 107, 106, 105, 105, 104, 108, 112, 116, 120, 120, 106, 106, 106, 106, 106, 100,
    35, 35, 35, 45, 55, 65, 65, 65, 65, 65, 65, 65, 65, 65, 71, 81, 91, 101, 127, 131, 135, 139, 143, 144, 145, 144, 144, 142, 138, 138, 136, 133, 131, 127, 125, 122, 120, 125, 130, 135, 140, 145, 140, 108, 116, 116, 116, 116, 116, 100,
    38, 38, 38, 48, 58, 68, 68, 68, 68, 68, 68, 68, 68, 68, 74, 84, 94, 104, 128, 132, 136, 140, 143, 145, 146, 145, 145, 143, 139, 139, 137, 134, 130, 126, 124, 126, 130, 135, 140, 145, 150, 155, 150, 140, 120, 120, 120, 120, 120, 100,
    41, 41, 41, 51, 61, 71, 71, 71, 71, 71, 71, 71, 71, 71, 77, 87, 97, 107, 129, 133, 137, 141, 143, 146, 147, 146, 146, 144, 140, 140, 138, 135, 129, 125, 123, 122, 124, 129, 134, 139, 144, 149, 139, 138, 122, 122, 122, 122, 122, 100,
    44, 44, 44, 54, 64, 74, 74, 74, 74, 74, 74, 74, 74, 74, 80, 90, 100, 110, 130, 134, 138, 142, 144, 147, 148, 147, 147, 145, 141, 141, 139, 134, 128, 124, 122, 122, 122, 127, 132, 137, 142, 147, 137, 136, 124, 124, 124, 124, 124, 100,
    47, 47, 47, 57, 67, 77, 77, 77, 77, 77, 77, 77, 77, 77, 87, 97, 107, 117, 131, 135, 139, 143, 144, 148, 149, 148, 148, 146, 142, 143, 140, 133, 127, 123, 121, 120, 121, 126, 131, 136, 141, 146, 136, 134, 126, 126, 126, 126, 126, 100,
    45, 45, 45, 55, 65, 75, 75, 75, 75, 75, 75, 75, 78, 88, 98, 108, 118, 128, 138, 142, 144, 144, 144, 149, 150, 149, 149, 145, 143, 145, 141, 132, 126, 122, 120, 119, 120, 125, 130, 135, 140, 145, 135, 132, 130, 130, 130, 130, 130, 100,
    43, 43, 43, 53, 63, 73, 73, 73, 73, 73, 73, 76, 79, 89, 109, 108, 118, 128, 138, 142, 144, 144, 144, 149, 150, 149, 149, 145, 143, 153, 142, 131, 125, 121, 120, 119, 118, 117, 116, 115, 114, 144, 139, 134, 136, 136, 136, 136, 136, 100,
    42, 42, 42, 52, 62, 72, 72, 72, 72, 72, 72, 75, 78, 88, 98, 108, 118, 128, 138, 142, 144, 144, 144, 142, 142, 138, 148, 143, 144, 142, 142, 130, 124, 124, 125, 125, 124, 123, 123, 123, 128, 143, 133, 128, 142, 142, 142, 142, 142, 100,
    41, 41, 41, 51, 61, 71, 71, 71, 71, 71, 71, 74, 77, 87, 97, 107, 117, 127, 137, 141, 143, 143, 143, 141, 141, 137, 146, 142, 133, 141, 141, 129, 123, 125, 130, 129, 128, 127, 127, 132, 137, 142, 132, 126, 148, 148, 148, 148, 148, 100,
    40, 40, 40, 50, 60, 70, 70, 70, 70, 70, 70, 73, 76, 86, 96, 106, 116, 126, 136, 140, 142, 142, 142, 140, 140, 136, 142, 141, 136, 140, 140, 139, 137, 135, 133, 131, 130, 129, 128, 132, 137, 142, 131, 125, 142, 142, 142, 142, 142, 100,
    46, 46, 46, 56, 66, 76, 76, 76, 76, 76, 76, 84, 92, 100, 108, 116, 124, 132, 140, 144, 146, 146, 146, 144, 144, 140, 140, 140, 140, 144, 140, 139, 137, 135, 133, 131, 130, 129, 128, 127, 126, 141, 131, 124, 136, 136, 136, 136, 136, 100,
    50, 50, 50, 60, 70, 80, 80, 80, 80, 80, 80, 88, 96, 104, 112, 120, 128, 136, 144, 148, 150, 150, 150, 148, 148, 144, 138, 139, 144, 148, 144, 143, 141, 139, 137, 135, 134, 133, 132, 131, 130, 141, 130, 123, 130, 130, 130, 130, 130, 100,
    54, 54, 54, 64, 74, 84, 84, 84, 84, 84, 84, 92, 100, 108, 116, 124, 132, 140, 148, 152, 154, 154, 154, 152, 152, 148, 136, 140, 148, 152, 148, 147, 145, 143, 141, 139, 138, 137, 136, 135, 134, 140, 130, 122, 126, 126, 126, 126, 126, 100,
    58, 58, 58, 68, 78, 88, 88, 88, 88, 88, 88, 96, 104, 112, 120, 128, 136, 144, 152, 156, 158, 158, 158, 156, 156, 152, 136, 144, 152, 156, 152, 151, 149, 147, 145, 143, 142, 141, 140, 139, 138, 134, 130, 121, 124, 124, 124, 124, 124, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 133, 129, 120, 122, 122, 122, 122, 122, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 132, 129, 128, 120, 120, 120, 120, 120, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 131, 130, 129, 123, 123, 123, 123, 123, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 130, 132, 131, 126, 126, 126, 126, 126, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 134, 133, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 136, 135, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 138, 137, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100,
    62, 62, 62, 72, 82, 92, 92, 92, 92, 92, 92, 100, 108, 116, 124, 132, 140, 148, 156, 160, 162, 162, 162, 160, 160, 156, 140, 148, 156, 160, 156, 155, 153, 151, 149, 147, 146, 145, 144, 143, 142, 141, 140, 139, 130, 130, 130, 130, 130, 100
} ; /* End of angleTableROM[] */

const varsize inpValueROM[] = 
{
    0, 0, 999, 9999, 10, 100, 20, 200, 30, 300, 40, 400, 50, 500, 60, 600,
    70, 700, 80, 800, 90, 900, 100, 1000, 110, 1100, 120, 1200, 130, 1300,
    140, 1400, 150, 1500, 160, 1600, 170, 1700, 180, 1800, 190, 1900, 200, 2000,
    210, 2100, 220, 2200, 230, 2300, 240, 2400, 250, 2500, 260, 2600, 270, 2700,
    280, 2800, 290, 2900, 300, 3000,
    310, 3100, 320, 3200, 330, 3300, 340, 3400, 350, 3500, 360, 3600, 370, 3700,
    380, 3800, 390, 3900, 400, 4000,
    410, 4100, 420, 4200, 430, 4300, 440, 4400, 450, 4500, 460, 4600, 470, 4700,
    480, 4800, 490, 4900, 500, 5000,

/*  Read out the end column */

    500, 0, 500, 200, 500, 300,
    500, 400, 500, 500, 500, 600, 500, 700, 500, 800, 500, 900, 500, 1000,
    500, 1100, 500, 1200, 500, 1300,
    500, 1400, 500, 1500, 500, 1600, 500, 1700, 500, 1800, 500, 1900, 500, 2000,
    500, 2100, 500, 2200, 500, 2300, 500, 2400, 500, 2500, 500, 2600, 500, 2700,
    500, 2800, 500, 2900, 500, 3000,
    500, 3100, 500, 3200, 500, 3300, 500, 3400, 500, 3500, 500, 3600, 500, 3700,
    500, 3800, 500, 3900, 500, 4000,
    500, 4100, 500, 4200, 500, 4300, 500, 4400, 500, 4500, 500, 4600, 500, 4700,
    500, 4800, 500, 4900, 500, 5000,
    
/*  Read out a column in the middle */

    160, 0, 160, 200, 160, 300,
    160, 400, 160, 160, 160, 600, 160, 700, 160, 800, 160, 900, 160, 1000,
    160, 1100, 160, 1200, 160, 1300,
    160, 1400, 160, 1160, 160, 1600, 160, 1700, 160, 1800, 160, 1900, 160, 2000,
    160, 2100, 160, 2200, 160, 2300, 160, 2400, 160, 2160, 160, 2600, 160, 2700,
    160, 2800, 160, 2900, 160, 3000,
    160, 3100, 160, 3200, 160, 3300, 160, 3400, 160, 3160, 160, 3600, 160, 3700,
    160, 3800, 160, 3900, 160, 4000,
    160, 4100, 160, 4200, 160, 4300, 160, 4400, 160, 4160, 160, 4600, 160, 4700,
    160, 4800, 160, 4900, 160, 5000,
    
/*  Read out the end row */

    0, 5000, 20, 5000, 30, 5000, 40, 5000, 50, 5000, 60, 5000,
    70, 5000, 80, 5000, 90, 5000, 100, 5000, 110, 5000, 120, 5000, 130, 5000,
    140, 5000, 150, 5000, 160, 5000, 170, 5000, 180, 5000, 190, 5000, 200, 5000,
    210, 5000, 220, 5000, 230, 5000, 240, 5000, 250, 5000, 260, 5000, 270, 5000,
    280, 5000, 290, 5000, 300, 5000,
    310, 5000, 320, 5000, 330, 5000, 340, 5000, 350, 5000, 360, 5000, 370, 5000,
    380, 5000, 390, 5000, 400, 5000,
    410, 5000, 420, 5000, 430, 5000, 440, 5000, 450, 5000, 460, 5000, 470, 5000,
    480, 5000, 490, 5000, 500, 5000,

/* Reveal a range of values in a small "grid" via interpolation */

    160, 2100, 161, 2100, 162, 2100, 163, 2100,
    164, 2100, 165, 2100, 166, 2100, 167, 2100, 168, 2100, 169, 2100, 170, 2100,
    170, 2101, 170, 2102, 170, 2103, 170, 2104, 170, 2105, 170, 2106, 170, 2107,
    170, 2108, 170, 2109, 170, 2110, 170, 2120, 170, 2130, 170, 2140, 170, 2150,
    170, 2160, 170, 2170, 170, 2180, 170, 2190, 170, 2200
} ; /* End of test values:  inpValueROM[] */

/*******************************************************************************
    Functions                                                                   
*******************************************************************************/

/*------------------------------------------------------------------------------
// FUNC    : GetTestData
//
// DESC    : 
//      Builds the table of input data which represents 'engine load' and
//      'engine speed' input parameters. This is the "real world" data 
//      stream which drives the algorithm. This data is installed in RAM prior 
//      to execution of the algorithm.
//         
// RETURNS : 
//      true/false
// ---------------------------------------------------------------------------*/

n_int
GetTestData( n_void ) 
{
    int i , j ;

    inpLoadValue = (varsize*)th_malloc( ( NUM_TESTS + 1 ) * sizeof( varsize ) ) ;
    inpSpeedValue = (varsize*)th_malloc( ( NUM_TESTS + 1 ) * sizeof( varsize ) ) ;

    if( ( inpLoadValue == NULL ) || ( inpSpeedValue == NULL ) ) 
    {
        return( false ) ;
    }
    
    /* Copy the test values from ROM to RAM  */
    for( i = 0, j = 0; i < NUM_TESTS ; i++, j++ )
    {
        inpLoadValue[i] = inpValueROM[j++] ;
        inpSpeedValue[i] = inpValueROM[j] ;
    }
    return( true ) ;
} /* End of function 'GetTestData' */

/*------------------------------------------------------------------------------
// FUNC    : GetInputValues
//
// DESC    : 
//      On each pass of the table lookup, two values must be input:  'loadValue' 
//      and 'speedValue'.  These values are the 'x' and 'y' indices for the 
//      'angle' table. Each time this function is called, the next two pairs 
//      of input values are pulled from the table in RAM.  The table wraps 
//      around, so that input data is continuous.  A flag is returned TRUE 
//      whenever the table wraps around.
//         
// RETURNS : 
//      true/false
// ---------------------------------------------------------------------------*/

n_int
GetInputValues( n_void ) 
{
    loadValue = inpLoadValue[tableCount] ;
    speedValue = inpSpeedValue[tableCount] ;

    if( ++tableCount < NUM_TESTS )
    {
        return( false ) ;
    }

    tableCount = 0 ;
    return( true ) ;

} /* End of function 'GetInputValues' */







